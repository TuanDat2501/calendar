/* app/globals.scss */

// --- 1. CẤU HÌNH MÀU SẮC ---
$primary: #2563eb;       // Xanh dương (Công việc)
$personal: #ef4444;      // Đỏ (Cá nhân)
$health: #22c55e;        // Xanh lá (Sức khỏe)

$bg-app: #f9fafb;
$white: #ffffff;
$text-main: #1f2937;
$text-gray: #6b7280;
$border: #e5e7eb;

// --- 2. RESET & BASE ---
* { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
body { background-color: $bg-app; color: $text-main; -webkit-tap-highlight-color: transparent; }

// --- 3. LAYOUT ---
.app-container {
  max-width: 480px; margin: 0 auto; background-color: $bg-app; min-height: 100vh;
  padding-bottom: 90px; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.05);
}

.app-header {
  background: $white; padding: 20px; position: sticky; top: 0; z-index: 10;
  border-bottom: 1px solid $border;
  h1 { font-size: 22px; font-weight: 800; color: $text-main; }
}

.content-wrapper { padding: 16px; }

// --- 4. TABS ---
.tab-nav {
  display: flex; background: #e5e7eb; padding: 4px; border-radius: 12px; margin-bottom: 20px;
  .tab-btn {
    flex: 1; padding: 10px; border: none; background: transparent; border-radius: 8px;
    font-size: 14px; font-weight: 600; color: $text-gray; cursor: pointer;
    display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s;
    &.active { background: $white; color: $primary; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
  }
}

// --- 5. CALENDAR GRID (QUAN TRỌNG: MÀU SẮC) ---
.card {
  background: $white; border-radius: 16px; padding: 16px; margin-bottom: 20px;
  border: 1px solid $border; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

.calendar-header {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
  h3 { font-size: 16px; font-weight: 700; text-transform: capitalize; }
  button { 
    background: none; border: 1px solid $border; width: 32px; height: 32px; 
    border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center;
    &:hover { background: #f3f4f6; }
  }
}

.week-days {
  display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; margin-bottom: 8px;
  span { font-size: 11px; font-weight: 700; color: #9ca3af; text-transform: uppercase; }
}

.days-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; } /* Tăng gap chút cho thoáng */

.day-cell {
  height: 52px; 
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  border-radius: 12px; cursor: pointer; position: relative; 
  border: 2px solid transparent; // Chuẩn bị sẵn viền
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  background-color: $white; // Mặc định nền trắng
  
  .solar { font-size: 14px; font-weight: 600; z-index: 2; }
  .lunar { font-size: 10px; color: #9ca3af; margin-top: 2px; z-index: 2; }
  
  // Ẩn dấu chấm cũ đi
  .dot { display: none; }

  /* --- 1. LOGIC ĐỔ MÀU NỀN THEO LOẠI --- */
  &.type-work {
    background-color: $primary;
    color: $white;
    box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
    .lunar { color: rgba(255, 255, 255, 0.8); }
  }

  &.type-personal {
    background-color: $personal;
    color: $white;
    box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.3);
    .lunar { color: rgba(255, 255, 255, 0.8); }
  }

  &.type-health {
    background-color: $health;
    color: $white;
    box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3);
    .lunar { color: rgba(255, 255, 255, 0.8); }
  }

  /* --- 2. TRẠNG THÁI KHÁC --- */
  &:hover { transform: translateY(-2px); }

  &.today {
    border-color: $primary; 
    // Nếu hôm nay KHÔNG có lịch thì chữ xanh, có lịch thì giữ chữ trắng
    &:not(.type-work):not(.type-personal):not(.type-health) {
        color: $primary;
        .lunar { color: $primary; }
    }
  }

  /* --- 3. KHI ĐANG CHỌN (SELECTED) --- */
  &.selected {
    // Vì nền đã có màu, ta dùng viền đen đậm để đánh dấu ngày đang chọn
    border-color: $text-main; 
    transform: scale(0.95); // Thu nhỏ xíu hiệu ứng nhấn
    
    // Nếu ô đó chưa có màu (ngày trống), thì tô màu đen hoặc xám đậm
    &:not(.type-work):not(.type-personal):not(.type-health) {
        background-color: $text-main;
        color: $white;
        .lunar { color: rgba(255,255,255,0.7); }
    }
  }
}

// --- 6. EVENT LIST ---
.event-item {
  background: $white; padding: 14px; border-radius: 12px; border: 1px solid #f3f4f6;
  margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;
  box-shadow: 0 1px 2px rgba(0,0,0,0.02);

  h4 { font-size: 15px; font-weight: 600; margin-bottom: 4px; color: $text-main; }
  .time { font-size: 12px; color: $text-gray; display: flex; align-items: center; gap: 4px; }

  .tag {
    font-size: 10px; font-weight: 700; padding: 4px 10px; border-radius: 20px; text-transform: uppercase;
    &.work { background: #dbeafe; color: #1e40af; }
    &.personal { background: #fee2e2; color: #991b1b; }
    &.health { background: #dcfce7; color: #166534; }
  }
}

// --- 7. FORM & MODAL ---
.form-control {
  width: 100%; padding: 12px; border: 1px solid $border; border-radius: 10px;
  font-size: 14px; outline: none; background: #f9fafb; margin-bottom: 15px;
  &:focus { border-color: $primary; background: $white; }
}

.fab-btn {
  position: fixed; bottom: 25px; right: 25px; width: 56px; height: 56px;
  background: $primary; color: $white; border-radius: 50%; border: none;
  box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4); display: flex; align-items: center; justify-content: center;
  cursor: pointer; z-index: 50; transition: transform 0.2s;
  &:active { transform: scale(0.95); }
}

.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 100;
  display: flex; align-items: center; justify-content: center; padding: 20px;
  .modal-content {
    background: $white; width: 100%; max-width: 360px; padding: 24px; border-radius: 20px;
    animation: popIn 0.2s ease-out;
  }
}

.type-selector {
  display: flex; gap: 8px; margin-bottom: 20px;
  button {
    flex: 1; padding: 8px; border: 1px solid $border; background: $white; border-radius: 8px;
    font-size: 12px; font-weight: 600; cursor: pointer; color: $text-gray;
    
    &.selected {
      color: $white; border: none;
      &.work { background: $primary; }
      &.personal { background: $personal; }
      &.health { background: $health; }
    }
  }
}

.modal-actions {
  display: flex; gap: 10px;
  button {
    flex: 1; padding: 12px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer;
    &.cancel { background: #f3f4f6; color: $text-gray; }
    &.save { background: $primary; color: $white; }
  }
}

@keyframes popIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }